(function(e){e.fn.html5audio=function(h){function d(){var a=0==k.find("div[class='fontMeasure']").length?e("<div/>").addClass("fontMeasure").appendTo(k):k.find("div[class='fontMeasure']");ta=new apTextScroller;ta.init(a,hb,ae,"left",h.scrollSeparator,h.scrollSpeed)}function T(){U&&clearTimeout(U);ja.css("display","none");Ab=!1}function ua(a){if(m&&!x&&!ca){if(!Bb){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Bb=!0;$a.on(ib,function(a){a:{var c;
if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a.originalEvent;a.preventDefault();G(c)}}).on(jb,function(a){a:if(Bb){Bb=!1;$a.off(ib).off(jb);var c;if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&
a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a.originalEvent;a.preventDefault();G(c)}})}return!1}}function G(a){"horizontal"==Cb?C=Math.max(0,Math.min(1,(a.pageX-kb.offset().left)/ka)):(C=Math.max(0,Math.min(1,(a.pageY-kb.offset().top)/ka)),C=1-C);D()}function y(){if(!m||x)return!1;cc?(C=zc,cc=!1):(zc=C,C=0,cc=!0)}function D(){"horizontal"==Cb?dc.css("width",C*ka+"px"):dc.css("height",C*ka+"px");da&&("youtube"==V?Z?A&&A.setVolume(C):
"undefined"!==typeof l(E)&&l(E).pb_setVolume(C):P?n&&(n.volume=C):"undefined"!==typeof l(q)&&l(q).pb_setVolume(C));0<C?k.find(".player_volume").find("img").attr("src",gd):k.find(".player_volume").find("img").attr("src",hd);isMobile&&Db&&(U&&clearTimeout(U),U=setTimeout(T,ec))}function p(){Db&&U&&clearTimeout(U);La.css("display","block");ja.on("mousemove",Q).on("mouseout",L);$a.on("mouseout",L)}function L(){Db&&(U&&clearTimeout(U),U=setTimeout(T,ec));La.css("display","none");ja.off("mousemove",Q).off("mouseout",
L);$a.off("mouseout",L)}function Q(a){if("horizontal"==Cb){var b=a.pageX-kb.offset().left;if(!w(b))return!1;0>b?b=0:b>ka&&(b=ka);a=parseInt(a.pageX-ja.offset().left-La.width()/2,10);La.css("left",a+"px");b=Math.max(0,Math.min(1,b/ka));b=parseInt(100*b,10)}else{b=a.pageY-kb.offset().top;if(!w(b))return!1;0>b?b=0:b>ka&&(b=ka);a=parseInt(b-La.height()/2,10);La.css("top",a+be+"px");b=Math.max(0,Math.min(1,b/ka));b=parseInt(100*(1-b),10)}La.find("p").html(b+" %")}function ga(a){if(m&&!x&&da&&!Bb&&!fc){if(!ca){if("touchstart"==
a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();ca=!0;$a.on(ib,function(a){a:{var c;if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();va(c,a)}}).on(jb,function(a){wa(a)})}return!1}}function wa(a){if(ca){ca=!1;$a.off(ib).off(jb);
var b;if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else return!1;if(1<b.length)return!1;b=b[0]}else b=a;a.preventDefault();va(b,a)}if(ha)var c=setTimeout(function(){c&&clearTimeout(c);Ac=!1},500);return!1}function va(a,b){if(!ha){ab=a.pageX-Bc.offset().left;0>ab?ab=0:ab>W&&(ab=W);xa.width(ab);var c=Math.max(0,Math.min(1,ab/W))}else if(Ia){if(gc(b)){if(hc||
Cc>Dc-id)return!1;ca||(lb(!0),K.clearRect(0,0,la,pa),X(ma),ya());return!1}if(!hc)return!1;Ac=!0;var c=a.pageX-Va.offset().left-la/2,g=a.pageY-Va.offset().top-pa/2,c=Math.atan2(g,c);c>-1*Math.PI&&c<-.5*Math.PI&&(c=2*Math.PI+c);ma=c=Math.max(0,Math.min((c+Math.PI/2)/2*Math.PI*10))/100;K.clearRect(0,0,la,pa);X(ma);ya()}if(!w(c))return!1;Eb=ma;qa(c)}function qa(a){"youtube"==V?Z?(a=(a*A.getDuration()).toFixed(1),w(a)&&A.seek(a)):"undefined"!==typeof l(E)&&l(E).pb_seek(a):P?n&&n.seekable&&0<n.seekable.length&&
(!ce||isMobile?n.currentTime=a*n.duration:a*n.duration>=n.buffered.end(0)-5?n.currentTime=n.buffered.end(0)-5:n.currentTime=a*n.duration):"undefined"!==typeof l(q)&&l(q).pb_seek(a)}function X(a){K.beginPath();K.arc(la/2,pa/2,Ec-Fb/2,-ic,jd*a-ic,!1);K.strokeStyle=Fc;K.lineCap="butt";K.lineWidth=Fb;K.stroke()}function Wa(a){Xa.beginPath();Xa.arc(la/2,pa/2,Ec-Fb/2,-ic,jd*a-ic,!1);Xa.strokeStyle=de;Xa.lineCap="butt";Xa.lineWidth=Fb;Xa.stroke()}function ya(){if(F)a=62,b=57,K.fillStyle=Fc,K.fillRect(a,
b,14,45),K.fillRect(a+23,b,14,45);else{var a=65,b=57,c=65-a,g=102-b,f=Math.atan2(g,c)-Math.PI/3,g=Math.sqrt(c*c+g*g),c=Math.cos(f)*g+a,f=Math.sin(f)*g+b;K.beginPath();K.fillStyle=Fc;K.moveTo(a,b);K.lineTo(65,102);K.lineTo(c,f);K.fill()}}function gc(a){var b;if("touchstart"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)a=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)a=a.originalEvent.changedTouches;else return!1;if(1<a.length)return!1;
b=a[0]}else b=a.originalEvent;a=b.pageX-Va.offset().left;b=b.pageY-Va.offset().top;var c=la/2,g=pa/2;Cc=Math.sqrt((a-c)*(a-c)+(b-g)*(b-g));return Math.sqrt((a-c)*(a-c)+(b-g)*(b-g))<Dc}function ia(a){if(0!=k.find(".componentPlaylist").length)if(aa)"vertical"==Gb?Ma.outerHeight(!0)>=mb.height()?(aa.reinitialise(),a&&(aa.scrollToY(0),e(".jspPane").css("top","0px"))):(aa.destroy(),aa=null):(aa.reinitialise(),a&&(aa.scrollToX(0),e(".jspPane").css("left","0px")));else if(a=k.find(".componentPlaylist"),
aa=a.jScrollPane().data().jsp,a.on("jsp-initialised",function(a,c){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"==Gb&&!isMobile)a.on("mousewheel",ee)}function ee(a,b,c,g){if(!m||x)return!1;aa&&aa.scrollByX(100*(0<b?-1:1));return!1}function lb(a){if(F){if("youtube"==V){if(!Oa)return!1;Z?A.togglePlayback():("undefined"!==typeof l(E)&&l(E).pb_togglePlayback(),da=!0)}else P?n&&n.pause():"undefined"!==typeof l(q)&&l(q).pb_pause();F=!1;Ja("off")}else{if("youtube"==V){if(!Oa)return!1;Z?isMobile?!Hb&&
ea?(m=!1,jc("on")):A.togglePlayback():A.togglePlayback():("undefined"!==typeof l(E)&&l(E).pb_togglePlayback(),da=!0)}else P?n&&n.play():"undefined"!==typeof l(q)&&l(q).pb_play();F=!0;bb("off")}if(!a)return!1}function kd(a){if(!m||x)return!1;a.preventDefault();a=e(a.currentTarget);var b=a.attr("data-id");if(a.closest(".playlistItem").hasClass(Ib))return!1;ea=!0;Na();t.processPlaylistRequest(b)}function fe(a){if(!m||x)return!1;a.preventDefault();a=e(a.currentTarget).attr("class").split(" ");if(-1!=
e.inArray("controls_prev",a))ea=!0,Na(),t.advanceHandler(-1,!0);else if(-1!=e.inArray("controls_toggle",a))da&&lb();else if(-1!=e.inArray("controls_next",a))ea=!0,Na(),t.advanceHandler(1,!0);else if(-1!=e.inArray("player_volume",a))isMobile?Db?(U&&clearTimeout(U),Ab?(ja.css("display","none"),Ab=!1):(ja.css("display","block"),Ab=!0,U=setTimeout(T,ec))):(y(),D()):(y(),D());else if(-1!=e.inArray("player_download",a)){if(!Pa)if(a=V){var b=t.getCounter(),c=B[b].download,b=Gc(b,!1);a=ld(a,b,c);md(a.name,
a.path)}else u&&alert("Invalid data-type for file download function! Quitting."),Pa=!1}else-1!=e.inArray("player_loop",a)?(za?(k.find(".player_loop").find("img").attr("src",kc),za=!1):(k.find(".player_loop").find("img").attr("src",Jb),za=!0),t.setLooping(za)):-1!=e.inArray("player_shuffle",a)&&(Aa?(k.find(".player_shuffle").find("img").attr("src",lc),Aa=!1):(k.find(".player_shuffle").find("img").attr("src",Kb),Aa=!0),t.setRandom(Aa))}function ge(a){m&&(a.preventDefault(),a=e(a.currentTarget).attr("class").split(" "),
-1!=e.inArray("controls_prev",a)?k.find(".controls_prev").find("img").attr("src",he):-1!=e.inArray("controls_toggle",a)?F?bb("on"):Ja("on"):-1!=e.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",ie):-1!=e.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",je):k.find(".player_volume").find("img").attr("src",ke):-1!=e.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",le):-1!=e.inArray("player_loop",a)?za?k.find(".player_loop").find("img").attr("src",
kc):k.find(".player_loop").find("img").attr("src",Jb):-1!=e.inArray("player_shuffle",a)&&(Aa?k.find(".player_shuffle").find("img").attr("src",lc):k.find(".player_shuffle").find("img").attr("src",Kb)))}function me(a){m&&(a.preventDefault(),a=e(a.currentTarget).attr("class").split(" "),-1!=e.inArray("controls_prev",a)?k.find(".controls_prev").find("img").attr("src",ne):-1!=e.inArray("controls_toggle",a)?F?bb("off"):Ja("off"):-1!=e.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",
oe):-1!=e.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",gd):k.find(".player_volume").find("img").attr("src",hd):-1!=e.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",pe):-1!=e.inArray("player_loop",a)?za?k.find(".player_loop").find("img").attr("src",Jb):k.find(".player_loop").find("img").attr("src",kc):-1!=e.inArray("player_shuffle",a)&&(Aa?k.find(".player_shuffle").find("img").attr("src",Kb):k.find(".player_shuffle").find("img").attr("src",
lc)))}function Na(){if(!ra&&-1!=t.getCounter()){var a=e(Qa[t.getCounter()]);if(a&&a.hasClass("playlistSelected")){var b=a.attr("data-id");a.removeClass("playlistSelected").addClass("playlistNonSelected");"undefined"!==typeof playlistItemEnabled&&playlistItemEnabled(N,M,a,b)}}}function nd(){if(!ra){var a=e(Qa[t.getCounter()]);if(a&&a.hasClass("playlistNonSelected")){var b=a.attr("data-id");a.removeClass("playlistNonSelected").addClass("playlistSelected");"undefined"!==typeof playlistItemDisabled&&
playlistItemDisabled(N,M,a,b)}}}function Hc(){var a=h.activeItem;w(a)&&-1!=a?(0>a?a=0:a>H-1&&(a=H-1),t.setCounter(a,!1)):ea=!0}function od(){v&&-1!=t.getCounter()&&(Lb(),pd(),Na())}function Mb(){Lb();pd();var a=0,b;for(a;a<H;a++)b=e(Qa[a]).off("click",kd),qd&&!isMobile&&b.off("mouseenter").off("mouseleave");v&&(v.children().each(function(){var a=e(this);a.data("hap_wrap_player")&&a.data("hap_wrap_player").destroyPlaylist()}),v.empty(),v=null);Ma.empty();ra=Nb=!1;mc=O=r=null;nb=ob=Ob=!1;pb=null;t.reSetCounter();
B=[];Qa=[];R=[];aa&&aa.reinitialise()}function Lb(){nc&&(Z?A&&A.stop():"undefined"!==typeof l(E)&&l(E).pb_dispose(),nc=!1);P?(Ba&&clearInterval(Ba),n&&(n.pause(),n.src=""),Pb&&Pb.off("ended pause play canplay canplaythrough loadedmetadata error")):"undefined"!==typeof l(q)&&l(q).pb_dispose();Ic();mc?oc.css("display","block"):oc.css("display","none");Eb=null;Jc=da=F=fc=!1;Kc||(Qb=void 0)}function rd(a){if("undefined"===typeof a)return u&&alert("setPlaylist method requires data parameter. loadPlaylist failed."),
!1;if("undefined"===typeof a.hidden)return u&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var b=qe(a.hidden);if("undefined"===typeof a.id)return u&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),!1;a=a.id;x=!0;sd||(sd=!0);td();Ma.css("opacity",0);v&&Mb();Nb=!1;ra=b;ud&&isIE?(b=e(Ya.find(a).css("display","block").clone().wrap("<p>").parent().html()),e(Ya.find(a).css("display","none"))):(b=Ya.find(a).css("display","block").clone(),
Ya.find(a).css("display","none"));b.css("fontSize",0);if(0==b.length)return u&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'),Lc(),!1;if(ra)qb.empty(),b.appendTo(qb),Ca=0,nb=ob=cb=!0,v=Mc;else{if(!aa&&0==Ma.length)return u&&alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;b.appendTo(Ma);v=b}B=[];Qa=[];R=[];J=[];
b.find("li[class*='playlistItem']").each(function(){J.push(e(this))});Y()}function Y(){J.length?re():se()}function re(){Rb=fa=S=O=na=null;Nc=!1;var a=J[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path"),g=a.hasClass(vd);z=[];a.hasClass(wd)&&(Nc=!0);void 0==a.attr("data-plink")||I(a.attr("data-plink"))||(na=a.attr("data-plink"));void 0!=a.attr("data-dlink")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?I(a.attr("data-dlink"))||(O=a.attr("data-dlink")):O=I(a.attr("data-dlink"))?
!0:a.attr("data-dlink"));void 0!=a.attr("data-download")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?I(a.attr("data-download"))||(S=a.attr("data-download")):S=I(a.attr("data-download"))?!0:a.attr("data-download"));void 0==a.attr("data-thumb")||I(a.attr("data-thumb"))||(fa=a.attr("data-thumb"));I(e.trim(a.html()))||(Rb=a.html());if(g)r=a,J.shift(),Y();else if("local"==b)r=a,J.shift(),Y();else if("soundcloud"==b)r=a.data("toremove","true"),pc=0,qc(c);else if("podcast"==b)r=
a.data("toremove","true"),g=Oc+"?url="+encodeURIComponent(c),e.ajax({url:g,dataType:"json",cache:!1}).done(function(a){if(ieBelow9){a=te(a.contents);var b,c=0;e(a).find("item").each(function(){if(c==Pc)return!1;b=e(this);k={type:"podcast"};k.mp3=b.find("enclosure").attr("url");k.ogg="";k.title=b.find("title").text();0<b.find("media\\:thumbnail").length?b.find("media\\:thumbnail").attr("url")?k.thumb=b.find("media\\:thumbnail").attr("url"):fa&&(k.thumb=fa):fa&&(k.thumb=fa);na&&(k.url=na);O&&(k.dlink=
O);S&&(k.download=S);z.push(k);c++})}else{xd.html(a.contents);a=xd.get(0).getElementsByTagName("item");var g=0,c=a.length,f,d,k;c>Pc&&(c=Pc);for(g;g<c;g++)f=a[g],void 0!=f.getElementsByTagName("enclosure")[0]&&(k={type:"podcast"},k.mp3=f.getElementsByTagName("enclosure")[0].getAttribute("url"),k.ogg="",void 0!=f.getElementsByTagName("itunes:duration")[0]&&(d=ue(f.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),k.length=parseInt(1E3*d,10)),void 0!=f.getElementsByTagName("media:thumbnail")[0]?
void 0!=f.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?k.thumb=f.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):fa&&(k.thumb=fa):fa&&(k.thumb=fa),k.title=f.getElementsByTagName("title")[0].childNodes[0].nodeValue,na&&(k.url=na),O&&(k.dlink=O),S&&(k.download=S),z.push(k))}Ra()}).fail(function(a,b,g){u&&alert("Parse feed error: "+a.responseText);u&&alert("Playlist process failed, podcast: "+c);r&&"true"==r.data("toremove")&&r.remove();J.shift();Y()});else if("folder"==
b){r=a.data("toremove","true");var g=hap_source_path+"folder_parser.php",f=!0;void 0!=a.attr("data-subdirs")&&"false"==a.attr("data-subdirs")&&(f=!1);f={dir:c,subdirs:f};e.ajax({type:"GET",url:g,data:f,dataType:"json"}).done(function(a){ve(a,"title");var b=0,c=a.length,g,f;yd&&(Za=z.length?z.length-1:0);for(b;b<c;b++)if(g=a[b],f=g.path,f=f.replace(/\\'/g,"'"),f=f.replace(/\\"/g,'"'),f=f.replace(/\\0/g,"\x00"),path=f=f.replace(/\\\\/g,"\\"),console.log(g),f={type:"folder"},/.mp3/.test(path)){f.mp3=
path;f.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var e=path.substr(0,path.lastIndexOf("."));title=/\//i.test(e)?e.substr(e.lastIndexOf("/")+1):e;title=title.split("_").join(" ");f.title=title;f.thumb=path.substr(0,path.lastIndexOf("."))+".jpg";f.size=parseInt(g.size,10);f.lastmod=parseInt(g.lastmod,10);na&&(f.url=na);O&&(f.dlink=O);S&&(f.download=S);fa&&(f.thumb=fa);z.push(f)}z.length&&yd?zd():Ra()}).fail(function(a,b,f){u&&alert("Read folder error! Make sure you run this online or on local server!");
u&&alert("Playlist process failed, folder: "+c);r&&"true"==r.data("toremove")&&r.remove();J.shift();Y()})}else if("xml"==b){r=a;var g=hap_source_path+c,d,k=[];e.ajax({type:"GET",url:g,dataType:"html",cache:!1}).done(function(b){J.shift();e(b).find("li[class='playlistItem']").each(function(){d=Qc(e(this));r?r.after(e(d)):0<v.children().size()?e(d).prependTo(v):e(d).appendTo(v);r=e(d);k.push(e(d))});b=0;var c=k.length;k.reverse();for(b;b<c;b++)J.unshift(k[b]);k=null;a.remove();Y()}).fail(function(a,
b,f){u&&alert("Playlist process failed, xml: "+c);r&&r.remove();J.shift();Y()})}else if("database_data"==b||"database_html"==b)if(void 0==a.attr("data-table")||I(a.attr("data-table")))u&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+c)),J.shift(),Y();else{var h=f=null,l=null;void 0==a.attr("data-limit")||I(a.attr("data-limit"))||(f=parseInt(a.attr("data-limit"),10));void 0==a.attr("data-range")||I(a.attr("data-range"))||(g=a.attr("data-range").split(","),2==g.length&&
(h=g[0],l=g[1]));r=a;g=hap_source_path+"includes/database.php";k=[];f={db_name:c,db_table:a.attr("data-table"),db_type:b,limit:f,range_from:h,range_to:l};e.ajax({type:"POST",url:g,data:f}).done(function(f){if(-1<f.indexOf("Database information missing!")||-1<f.indexOf("Db connection failed")||-1<f.indexOf("Db selection failed")||-1<f.indexOf("Db query failed"))u&&(alert(f),alert("Playlist process failed, database query: "+c)),r&&r.remove(),J.shift();else{J.shift();f=e.parseJSON(f);var g=0,h=f.length,
l;for(g;g<h;g++){l=f[g];if("database_data"==b)if(l.type&&l.mp3||l.path)d=Ad(l);else continue;else if(l.path)d=Qc(l.path);else continue;r?r.after(e(d)):0<v.children().size()?e(d).prependTo(v):e(d).appendTo(v);r=e(d);k.push(e(d))}g=0;h=k.length;k.reverse();for(g;g<h;g++)J.unshift(k[g]);k=null;a.remove()}Y()}).fail(function(a,b,f){u&&alert("Playlist process failed, database query: "+c);r&&r.remove();J.shift();Y()})}else"youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?(r=a.data("toremove",
"true"),Bd.setData({type:b,path:c})):"ofm_single"==b?(r=a.data("toremove","true"),Sa=[],Sa.push({id:c,type:b}),Sb()):"ofm_playlist"==b||"ofm_project"==b?(r=a.data("toremove","true"),Rc=b,rc=c,Sa=[],Tb=1,Cd()):(u&&alert("Invalid playlist data-type attribute!"),J.shift(),Y())}function Ra(){if(z.length){var a,b,c=0,g=z.length,f,d;for(c;c<g;c++)f=z[c],a=e('<li class="playlistItem" data-type="'+f.type+'"data-mp3="'+f.mp3+'" data-ogg="'+f.ogg+'" data-thumb="'+f.thumb+'"></li>'),d=f.mp3,/\.(mp3)$/i.test(f.mp3)||
(d+=".mp3"),Nc&&a.addClass(wd),f.url&&a.attr("data-plink",f.url),f.dlink&&(1!=f.dlink&&"true"!=f.dlink?a.attr("data-dlink",f.dlink):a.attr("data-dlink",d)),f.download&&(1!=f.download&&"true"!=f.download?a.attr("data-download",f.download):a.attr("data-download",d)),f.title&&a.attr("data-title",f.title),f.thumb&&("//"==f.thumb.substr(0,2)&&(f.thumb="http:"+f.thumb),a.attr("data-thumb",f.thumb)),f.length&&a.attr("data-length",f.length),"title"==Ta?b=e('<a class="playlistNonSelected" href="#">'+f.title+
"</a>").appendTo(a):"thumb"==Ta?b=e('<a class="playlistNonSelected" href="#"><img src="'+f.thumb+'" alt="thumb"/></a>').appendTo(a):"all"==Ta&&(b=e('<a class="playlistNonSelected" href="#"></a>').appendTo(a),e('<span class="hap_thumb"><img src="'+f.thumb+'" alt="thumb"/></span>').appendTo(b),e('<span class="hap_title"><p>'+f.title+"</p></span>").appendTo(b)),Rb&&b.after(Rb),r?(r.after(a),"true"==r.data("toremove")&&r.remove()):a.appendTo(v),r=a}J.shift();Y()}function se(){if(Ob||ob){var a=0;r=null;
var b;qb.find("li[class*='playlistItem']").each(function(){b=e(this);r?r.after(b):cb?b.appendTo(v):v.children().eq(Ca).before(b);r=b;a++});qb.empty()}sc();Ma.css("opacity",1);m||Dd();Rb=r=null;x=!1;Lc();if(0<H){if(Ob||ob){var c=t.getCounter();t.setPlaylistItems(H,!1);Ca<=c&&(cb||t.reSetCounter(c+a));nb&&(nb=!1,Hc())}else t.setPlaylistItems(H),Hc();db&&Ua()}ob=Ob=!1;0==H&&"undefined"!==typeof playlistEmpty&&playlistEmpty(N,M);"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(N,
M);Nb=!0}function sc(){B=[];R=[];Qa=[];if(0==v.length)return u&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),!1;var a=0,b,c,g=v.find("li"),f=g.length,d,k,l,h,n,p,T,q,r,w;Ub=0;for(a;a<f;a++){c=e(g[a]).addClass(vd);R.push(c);Sc&&c.addClass(Ib);Ub="horizontal"==Gb?Ub+c.outerWidth(!0):Ub+c.outerHeight(!0);b=c.find("a[class=playlistNonSelected]");0==b.length&&(b=c.find("a[class=playlistSelected]"));
b.off().on("click",kd).attr("data-id",a);Qa.push(b);if(qd&&!isMobile)b.on("mouseenter",function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id");var b=e(Qa[a]),c=!1;t.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollover&&playlistItemRollover(N,M,b,a,c);return!1}).on("mouseleave",function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();
a=e(a.currentTarget).attr("data-id");var b=e(Qa[a]),c=!1;t.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollout&&playlistItemRollout(N,M,b,a,c);return!1});d="";void 0!=c.attr("data-title")?d=c.attr("data-title"):"title"==Ta?d=b.html():"thumb"!=Ta&&"all"==Ta&&(d=b.find("span[class=hap_title]").find("p").html());Tc&&(k=Uc(a)+Vc+d,b.html(k));c=e(R[a]).attr({"data-id":a,"data-title":d});l=k=p=n="";h=void 0;w=r=q=T=null;void 0!=c.attr("data-mp3")&&(n=c.attr("data-mp3"));void 0!=c.attr("data-ogg")&&
(p=c.attr("data-ogg"));void 0!=c.attr("data-type")&&(k=c.attr("data-type"));void 0!=c.attr("data-origtype")&&(l=c.attr("data-origtype"));void 0==c.attr("data-length")||I(c.attr("data-length"))||(h=c.attr("data-length"));"youtube"==k?(void 0==c.attr("data-download")||I(c.attr("data-download"))||(T=c.attr("data-download")),void 0==c.attr("data-dlink")||I(c.attr("data-dlink"))||(q=c.attr("data-dlink"))):(void 0!=c.attr("data-download")&&(T=I(c.attr("data-download"))||"true"==c.attr("data-download")?
n:c.attr("data-download")),void 0!=c.attr("data-dlink")&&(q=I(c.attr("data-dlink"))||"true"==c.attr("data-dlink")?n:c.attr("data-dlink")));void 0==c.attr("data-plink")||I(c.attr("data-plink"))||(r=c.attr("data-plink"));void 0==c.attr("data-thumb")||I(c.attr("data-thumb"))||(w=c.attr("data-thumb"));ra||(r&&0==c.find("a[class=plink]").length&&(r=e('<a class="plink" href="'+r+'" target="_blank"><img src="'+Ed+'" alt="purchase"/></a>'),b.after(r)),q&&0==c.find("a[class=dlink]").length&&(q=e('<a class="dlink" href="#" data-dlink="'+
q+'"><img src="'+Fd+'" alt="download"/></a>'),b.after(q),I(c.attr("data-dlink"))),Gd&&0==c.find("a[class=premove]").length&&(c=e('<a class="premove" href="#"><img src="'+we+'" alt="remove"/></a>'),b.after(c)));B.push({id:a,type:k,origtype:l,title:d,mp3:n,ogg:p,length:h,download:T,thumb:w})}g=null;H=B.length;ra||(xe(),ye&&mb.length&&!v.hasClass("ui-sortable")&&(v.on("sortstart",function(a,b){b.helper.css("margin-top",Hd.scrollTop())}),v.on("sortbeforestop",function(a,b){b.helper.css("margin-top",0)}),
v.sortable({cursor:"move",update:function(a,b){sc();0<H&&t.setPlaylistItems(H);var c=Ma.find("a[class=playlistSelected]").attr("data-id");c&&(t.reSetCounter(c),db&&Ua());1==H&&Hc()},receive:function(a,b){"undefined"!==typeof dropReceive&&dropReceive(N,M)}})),Id&&("horizontal"==Gb&&Ma.width(Ub),ia(!0)));return!0}function Dd(){m=!0;x=!1;Lc();setTimeout(function(){Jd();"horizontal"==Cb?(ka=kb.width(),dc.css("width",C*ka+"px")):(ka=kb.height(),dc.css("height",C*ka+"px"));D()},100);"undefined"!==typeof audioPlayerSetupDone&&
audioPlayerSetupDone(N,M)}function xe(){var a=tc?rb:"click";k.find("a[class=dlink]").off().on(a,function(a){a.preventDefault();if(Pa)return!1;var c=e(this),g=c.closest(".playlistItem"),f=g.attr("data-id");if(g.hasClass(Ib))return!1;if(void 0==g.attr("data-type")||I(g.attr("data-type")))return u&&alert("Invalid data-type for file download function! Quitting."),Pa=!1;a=g.attr("data-type");void 0==g.attr("data-origtype")||I(g.attr("data-origtype"))||(a=g.attr("data-origtype"));void 0==c.attr("data-dlink")||
I(c.attr("data-dlink"))||(c=c.attr("data-dlink"),f=Gc(f,!1),a=ld(a,f,c),md(a.name,a.path))});k.find("a[class=plink]").off().on("click",function(a){if(e(this).closest(".playlistItem").hasClass(Ib))return!1});if(Gd)k.find("a[class=premove]").off().on("click",function(a){a.preventDefault();a=e(this).closest(".playlistItem");var c=parseInt(a.attr("data-id"),10);if(a.hasClass(Ib))return!1;N.removeTrack(c)})}function ld(a,b,c){"local"==a||"folder"==a?(c.indexOf("\\")&&(c=c.replace(/\\/g,"/")),c.match(/^http([s]?):\/\/.*/)||
(a=window.location.href,a=a.substr(0,a.lastIndexOf("/")+1),/^\.\.\//i.test(c)&&(c=c.substr(3),"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.lastIndexOf("/"))),a=a.substr(0,a.lastIndexOf("/")+1)),c=a+c),isMobile||(b=0<c.lastIndexOf("/")?c.substr(c.lastIndexOf("/")+1):c)):"soundcloud"==a&&(c=c.replace(/\/stream\\?/,"/download").replace(/\.mp3/,""));b=b.replace(/[^A-Z0-9\-\_\.]+/ig,"_");/\.(mp3)$/i.test(b)||(b+=".mp3");return{name:b,path:c}}function md(a,b){if(isMobile)if(Pa=!0,ze)Kd||(Wc=Ld())&&(Kd=!0),
Wc?Md(Wc,a,b):Pa=!1;else{var c=Ld();c?Md(c,a,b):Pa=!1}else Ae.attr("src",hap_source_path+"dl.php?path="+b+"&name="+a)}function Md(a,b,c){e.ajax({type:"POST",url:hap_source_path+"mail.php",data:"mail="+a+"&name="+b+"&path="+c}).done(function(a){Pa=!1}).fail(function(a,b,c){u&&alert("Send email error: "+a.responseText);Nd();Pa=!1});uc.css({marginTop:-uc.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500});Vb&&clearTimeout(Vb);Vb=setTimeout(Nd,Be)}function Nd(){Vb&&clearTimeout(Vb);
uc.stop().animate({opacity:0},{duration:500,complete:function(){uc.css("display","none")}})}function Ld(){for(var a=prompt("Please enter your email address where download link will be sent:"),b=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!b.test(a)||I(a))&&null!=a;)a=prompt("Please enter a valid email address:");return a}function Ce(){e(".hap_text_link").each(function(){var a=e(this),b=a.attr("href");"undefined"!==typeof b&&!1!==b&&-1<b.toLowerCase().indexOf(".mp3")&&a.prepend('<img class="play_link" src="'+
vc+'"/>')});e(".hap_text_link, .hap_image_link").click(function(a){if(!m||x)return!1;a=e(this);var b=a.attr("href");if("undefined"===typeof b||!1===b)return!1;if(Qb&&Qb==b)return lb();Na();t.reSetCounter();Qb=b;Od=a;Kc=!0;Da&&Da.attr("src",vc);a.hasClass("hap_text_link")&&(Da=a.find("img").attr("src",Pd));oa=Qb;sb=oa.substr(0,oa.lastIndexOf("."))+".ogg";ea=!0;P||"undefined"!==typeof l(q)&&l(q).pb_setAutoplay(!0);Lb();Xc();return Kc=!1})}function Sb(){Sa.length?De(Sa.shift()):(0==z.length&&r&&"true"==
r.data("toremove")&&r.remove(),z.length>Wb&&(z=z.slice(0,Wb)),Ra())}function De(a){var b=a.id,c=a.type;a=Oc+"?url="+encodeURIComponent("http://api.official.fm/tracks/"+b+"?fields=streaming,cover&api_version=2");e.ajax({url:a,dataType:"html",cache:!1}).done(function(a){var b=JSON.parse(a).contents;a={};var d,e;b.track&&b.track.streaming&&b.track.streaming.http&&(b=b.track,a.type=c,a.length=b.duration?b.duration:null,a.mp3=b.streaming.http,a.ogg=b.streaming.http,d=b.artist?b.artist:"Official Fm artist",
e=b.title?b.title:"Official Fm track",a.title=d+" - "+e,na&&(a.url=na),O&&(a.dlink=O),S&&(a.download=S),b.cover.urls.small?a.thumb=b.cover.urls.small:fa&&(a.thumb=fa),z.push(a));Sb()}).fail(function(a,c,d){u&&alert("Playlist process failed, ofm: "+b);Sb()})}function Qd(){1<Yc?(Tb+=1,Tb<=Yc&&Sa.length<Wb?Cd():Sa.length?Sb():(J.shift(),Y())):Sa.length?Sb():(0==z.length&&r&&"true"==r.data("toremove")&&r.remove(),J.shift(),Y())}function Cd(){var a=Oc+"?url="+encodeURIComponent("ofm_playlist"==Rc?"http://api.official.fm/playlists/"+
rc+"/tracks?api_version=2&page="+Tb+"":"http://api.official.fm/projects/"+rc+"/tracks?fields=cover&api_version=2&page="+Tb+"");console.log(a);e.ajax({url:a,dataType:"html",cache:!1}).done(function(a){a=JSON.parse(a).contents;Yc=a.total_pages;if(a.tracks&&a.tracks.length){var c=0,g=a.tracks.length,f;g>Wb&&(g=Wb);for(c;c<g;c++)f=a.tracks[c].track,f.url&&(f=f.url.substr(f.url.lastIndexOf("/")+1),f=f.substr(0,f.indexOf("?")),Sa.push({id:f,type:Rc}))}Qd()}).fail(function(a,c,g){u&&alert("Playlist process failed, ofm: "+
rc);Qd()})}function Ee(){Rd?isMobile?Hb?A.initVideo(oa):(m=!1,Zc=!0,jc("on")):A.initVideo(oa):(Xb=0==k.find("div[class='youtubeIframeMain']").length?e("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(k):k.find("div[class='youtubeIframeMain']"),A=e.youtubePlayer({autoPlay:Sd,defaultVolume:C,mediaPath:oa,youtubeHolder:Xb,youtubeChromeless:!1,isMobile:isMobile,initialAutoplay:Fe,quality:null,protocol:Ge},h),e(A).on("ap_YoutubePlayer.YT_READY",function(){$c||Xb.css("left",
"-10000px");Oa=!0}),e(A).on("ap_YoutubePlayer.START_PLAY",function(){Ba&&clearInterval(Ba);Ba=setInterval(He,250);Zc&&(A.stop(),A.initVideo(oa),Zc=!1);!Hb&&isMobile&&(jc("off"),m=Hb=!0)}),e(A).on("ap_YoutubePlayer.END_PLAY",function(){wc()}),e(A).on("ap_YoutubePlayer.STATE_PLAYING",function(){xc()}),e(A).on("ap_YoutubePlayer.STATE_PAUSED",function(){isMobile?"iPhone"==tb||"iPod"==tb?F&&(F=!1,Ja("off")):yc():yc()}),Rd=!0);da=nc=!0}function jc(a){"on"==a?($c=!0,Xb.css({top:"0px",left:"0px"})):(Xb.css("left",
"-10000px"),$c=null)}function Ie(){var a=E.substr(1);embedFlashMain(a);a=q.substr(1);embedFlashAudio(a);"undefined"!==typeof l(E)?Ea=setInterval(Je,100):(u&&alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+M),Td())}function Je(){void 0!=l(E).setData&&(Ea&&clearInterval(Ea),l(E).setData(h),k.find(".flashMain").css("left","-10000px"),Td())}function Td(){"undefined"!==typeof l(q)?Ea=setInterval(Ke,100):(u&&alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+
M),Ud())}function Le(){var a=q.substr(1);embedFlashAudio(a);var b=setTimeout(function(){b&&clearTimeout(b);"undefined"!==typeof l(q)?Ea=setInterval(Me,100):(u&&alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+M),ub())},500)}function Ke(){void 0!=l(q).setData&&(Ea&&clearInterval(Ea),l(q).setData(h),k.find(".flashAudio").css("left","-10000px"),Ud())}function Me(){void 0!=l(q).setData&&(Ea&&clearInterval(Ea),l(q).setData(h),k.find(".flashAudio").css("left",
"-10000px"),ub())}function Ud(){if(ha){var a=ba.substr(1);embedFlashCircle(a);"undefined"!==typeof l(ba)?Ea=setInterval(Ne,100):(u&&alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+M),ub())}else e(".circleMain").remove(),ub()}function Ne(){void 0!=l(ba).setData&&(Ea&&clearInterval(Ea),l(ba).setData(vb),ub())}function l(a){"#"==a.charAt(0)&&(a=a.substr(1));return-1!=navigator.appName.indexOf("Microsoft")?window[a]:
document[a]}function qc(a){if(I(ad))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),J.shift(),Y(),!1;/\/favorites$/.test(a)&&(a=a.replace(/\/favorites$/,"/likes"));var b=Oe(a,ad);e.ajax({url:b,dataType:"jsonp",cache:!1}).done(function(b){var g,f;if(b.tracks){console.log("DATA.TRACKS");g=b.tracks.length;g>sa&&(g=sa);for(f=0;f<g;f++)b.tracks[f].streamable&&b.tracks[f].stream_url?z.push(bd(b.tracks[f])):(g+=1,g>b.tracks.length&&(g=b.tracks.length));z.length>sa&&(z=z.slice(0,
sa));Ra()}else if(b.duration)console.log("DATA.DURATION"),b.permalink_url=a,b.streamable&&b.stream_url&&z.push(bd(b)),z.length>sa&&(z=z.slice(0,sa)),Ra();else if(b.username)/likes/.test(a)?(console.log("DATA.USERNAME.LIKES"),eb=b.uri+"/likes"):/favorites/.test(a)?(console.log("DATA.USERNAME.FAVOURITES"),eb=b.uri+"/favorites"):eb=b.uri+"/tracks",qc(eb);else if(e.isArray(b)){console.log("DATA.ISARRAY");g=b.length;g>sa&&(g=sa);for(f=0;f<g;f++)b[f].streamable&&b[f].stream_url?z.push(bd(b[f])):(g+=1,g>
b.length&&(g=b.length));g==Vd?(pc+=Vd,pc<sa?qc(eb):(z.length>sa&&(z=z.slice(0,sa)),Ra())):(z.length>sa&&(z=z.slice(0,sa)),Ra())}else b.kind&&"group"==b.kind?(console.log("GROUPS"),eb=b.uri+"/tracks",qc(eb)):(J.shift(),Y())}).fail(function(b,g,f){u&&alert("Playlist process failed, soundcloud: "+a);J.shift();Y()})}function bd(a){var b={type:"soundcloud"};a.duration&&(b.length=a.duration);b.mp3=a.stream_url+(/\?/.test(a.stream_url)?"&":"?")+"consumer_key="+ad;b.ogg="";b.title=a.title;na&&(b.url=na);
a.downloadable&&a.download_url?(O&&(b.dlink=O),S&&(b.download=S)):(O&&1!=O&&"true"!=O&&(b.dlink=O),S&&1!=S&&"true"!=S&&(b.download=S));a.artwork_url?b.thumb=a.artwork_url:fa&&(b.thumb=fa);return b}function Oe(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&offset="+pc+"&consumer_key="+b+"&callback=?"}function zd(){var a=z[Za].mp3+"?rand="+99999999*Math.random();ID3.loadTags(a,function(){var b=ID3.getAllTags(a);b.title&&(z[Za].title=b.title);b.artist&&
(z[Za].artist=b.artist);b.album&&(z[Za].album=b.album);if(b=b.picture){var c="",g=0,f=b.data.length;for(g;g<f;g++)c+=String.fromCharCode(b.data[g]);z[Za].thumb="data:"+b.format+";base64,"+window.btoa(c)}Za++;Za<z.length?zd():Ra()},{tags:["title","artist","album","picture"],onError:function(a){}})}function He(){if(Z){var a=A.getCurrentTime(),b=A.getDuration();Fa=A.getVideoBytesLoaded()/A.getVideoBytesTotal();w(a)&&w(b)?(fc=!1,Ga.html(Yb(a)+fb),Ha.html(Zb(b)),ha)?Ia&&(w(Fa)&&Wa(Fa),ma=a/b,!ca&&F&&(Ac||
X(a/b))):(w(Fa)&&Ka.width(Fa*W),ca||xa.width(a/b*W)):fc=!0}}function Pe(){var a=n.currentTime,b=n.duration;void 0!=n.buffered&&0!=n.buffered.length&&w(b)&&(Fa=n.buffered.end(0)/b);w(a)&&w(b)&&(Ga&&Ga.html(Yb(a)+fb),Ha&&Ha.html(Zb(b)));if(ha)Ia&&(w(Fa)&&Wa(Fa),w(a)&&w(b)&&(ma=a/b,!ca&&F&&X(a/b)));else{if(w(Fa)){var c=Fa*W;c>W&&(c=W);Ka&&Ka.width(c)}w(a)&&w(b)&&!ca&&xa&&xa.width(a/b*W)}}function wc(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(N,M,t.getCounter());Na();t.advanceHandler(1,
!0)}function xc(){Jc||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(N,M,t.getCounter()),Jc=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(N,M,t.getCounter());ha&&Ia&&ya()}function yc(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(N,M,t.getCounter())}function Xc(){"youtube"==V?Z?(Ee(),isMobile&&!Hb&&ea&&(m=!1,jc("on"))):("undefined"!==typeof l(E)&&(l(E).pb_play(oa,0,100,100,"youtube",ea),da=!0),nc=Oa=!0):P?(Wd||(Pb=e(document.createElement("audio")).attr("preload",
Qe),n=Pb[0],Wd=!0),gb?n.src=oa:$b&&(n.src=sb),ea&&(n.load(),n.play()),Pb.on("ended",function(a){wc()}).on("pause",function(a){yc()}).on("play",function(a){xc()}).on("canplay",function(a){}).on("canplaythrough",function(a){}).on("loadedmetadata",function(a){n.volume=C;Eb&&(n.seekable&&0<n.seekable.length&&(n.currentTime=Eb*n.duration),Eb=null);Ba&&clearInterval(Ba);Ba=setInterval(Pe,250)}).on("error",function(a){switch(n.error.code){case n.error.MEDIA_ERR_ABORTED:console.log("You aborted the audio playback.");
break;case n.error.MEDIA_ERR_NETWORK:console.log("A network error caused the audio download to fail part-way.");break;case n.error.MEDIA_ERR_DECODE:console.log("The audio playback was aborted due to a corruption problem or because the audio used features your browser did not support.");break;case n.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The audio could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}})):
"undefined"!==typeof l(q)&&l(q).pb_initAudio(oa);ea?(F=!0,bb("off")):(F=!1,Ja("off"));"youtube"!=V&&(da=!0);!isMobile&&ea&&A&&A.setAutoPlay(!0);ea=!0}function ub(){var a=[k.find(".controls_next"),k.find(".controls_prev"),k.find(".controls_toggle"),k.find(".player_volume"),k.find(".player_download"),k.find(".player_loop"),k.find(".player_shuffle")],b,c=a.length,g=0;for(g;g<c;g++)if(b=e(a[g]).css("cursor","pointer").on("click",fe),Re&&!isMobile)b.on("mouseover",ge).on("mouseout",me);Ce();pb?rd(pb):
m||Dd()}function Jd(){if(!ha&&(W=Bc.width(),w(Fa)&&Ka&&Ka.width(Fa*W),!ca&&xa)){var a,b;if("youtube"!=V){if(P)n&&(a=n.currentTime,b=n.duration);else if("undefined"!==typeof l(q))try{a=l(q).pb_getFlashPosition(),b=l(q).pb_getFlashDuration()}catch(c){}try{a&&w(a)&&b&&w(b)&&xa.width(a/b*W)}catch(c){}}}Id&&!ra&&ia();wb&&ta&&ta.checkSize()}function Lc(){Xd.css("display","none")}function td(){Xd.css("display","block")}function pd(){Ba&&clearInterval(Ba);wb&&ta&&ta.deactivate();hb.html(ac);Ga.html(cd+fb);
Ha.html(dd);ha?Ia&&(ma=0,K.clearRect(0,0,la,pa),Xa.clearRect(0,0,la,pa)):(xa.width(0),Ka.width(0));Ja("off");oc.css("display","none")}function Ic(){Ba&&clearInterval(Ba);db||(wb&&ta&&ta.deactivate(),hb.html(ac));Ga.html(cd+fb);Ha.html(dd);ha?Ia&&(ma=0,K.clearRect(0,0,la,pa),Xa.clearRect(0,0,la,pa)):(xa.width(0),Ka.width(0));Ja("off");oc.css("display","none")}function Ja(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",Se):k.find(".controls_toggle").find("img").attr("src",Te);Da&&Da.hasClass("play_link")&&
Da.attr("src",vc);ha&&(Ia?(K.clearRect(0,0,la,pa),X(ma),ya()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("play"))}function bb(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",Ue):k.find(".controls_toggle").find("img").attr("src",Ve);Da&&Da.hasClass("play_link")&&Od.hasClass("hap_text_link")&&Da.attr("src",Pd);ha&&(Ia?(K.clearRect(0,0,la,pa),X(ma),ya()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("pause"))}function w(a){return!isNaN(parseFloat(a))&&isFinite(a)}function Yb(a){a=
Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Zb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Ua(a){if("string"===typeof a){if(Tc&&t&&-1!=t.getCounter()){var b=t.getCounter();a=Uc(B[b].id)+Vc+a}}else{if("number"===typeof a){if(!t||0>a||a>H-1)return!1}else if(!t)return!1;b=t.getCounter();a=Gc(b)}wb&&ta?
(ta.input(a),ta.activate()):hb&&hb.html(a)}function Gc(a,b){if("undefined"===typeof b||null===b)b=!0;return B[a]&&B[a].title&&!I(B[a].title)?b?Tc?Uc(B[a].id)+Vc+B[a].title:B[a].title:B[a].title:ac}function Uc(a){return 9>a?"0"+(a+1):a+1}function We(a){var b=[],c=[],g=0;for(g;g<a;g++)b[g]=g;var g=0,f;for(g;g<a;g++)f=Math.round(Math.random()*(b.length-1)),c[g]=b[f],b.splice(f,1);return c}function Xe(a){var b=[],c=0;for(c;c<a;c++)b[c]=c;return b}function ve(a,b,c){"title"==b?a.sort(function(a,b){return a.title==
b.title?0:a.title<b.title?-1:1}):"type"==b&&a.sort(function(a,b){return a.type==b.type?0:a.type<b.type?-1:1});c&&a.reverse()}function I(a){return a?0==a.replace(/^\s+|\s+$/g,"").length:!0}function ue(a){a=a.split(":");for(var b=0,c=1;0<a.length;)b+=c*parseInt(a.pop()),c*=60;return b}function te(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available");
}function Ye(a,b){return b-a}function qe(a){if("string"===typeof a)switch(a.toLowerCase()){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;default:return!!a}else if("boolean"===typeof a)return!!a}function Ze(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function Ad(a){var b,c="",g,f="",d="",k="",l,h,n,m;b=a.type.toLowerCase();a.origtype&&(c=a.origtype.toLowerCase());a.mp3?g=a.mp3:a.path&&(g=a.path);a.ogg&&(f=a.ogg);
a.title&&(d=a.title);a.thumb&&(k=a.thumb);a.download&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.download||"true"==a.download||I(a.download)||(l=a.download):l=1==a.download?g:a.download);a.url&&(n=a.url);a.dlink&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.dlink||"true"==a.dlink||I(a.dlink)||(h=a.dlink):h=1==a.dlink?g:a.dlink);"local"==b?"title"==Ta?m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+g+"' data-ogg='"+
f+"' data-thumb='"+k+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'>"+d+"</a></li>":"thumb"==Ta?m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+g+"' data-ogg='"+f+"' data-thumb='"+k+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><img src='"+k+"' alt='thumb'/></a></li>":"all"==Ta&&(m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+g+"' data-ogg='"+f+"' data-thumb='"+k+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+
k+"' alt='thumb'/></span><span class='hap_title'><p>'"+d+"'</p></span></a></li>"):(m="<li class= 'playlistItem' data-type='"+b+"' data-path='"+g+"' data-thumb='"+k+"'></li>","database_data"==b&&(g=a.table?a.table:null,c=a.limit?a.limit:null,a=a.range?a.range:null,g&&(g=' data-table="'+g+'" ',f=m.match(/\>/),m=m.slice(0,f.index)+g+m.slice(f.index)),c&&(g=' data-limit="'+c+'" ',f=m.match(/\>/),m=m.slice(0,f.index)+g+m.slice(f.index)),a&&(g=' data-range="'+a+'" ',f=m.match(/\>/),m=m.slice(0,f.index)+
g+m.slice(f.index))));l&&(g=' data-download="'+l+'" ',f=m.match(/\>/),m=m.slice(0,f.index)+g+m.slice(f.index));"local"==b?(h&&(g="<a class='dlink' href='#' data-dlink='"+h+"'><img src='"+Fd+"' alt='download'/></a>",f=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,f.index)+g+m.slice(f.index)),n&&(g="<a class='plink' href='"+n+"' target='_blank'><img src='"+Ed+"' alt='purchase'/></a>",f=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,f.index)+g+m.slice(f.index))):(h&&(g=' data-dlink="'+h+'" ',f=m.match(/\>/),m=m.slice(0,
f.index)+g+m.slice(f.index)),n&&(g=' data-plink="'+n+'" ',f=m.match(/\>/),m=m.slice(0,f.index)+g+m.slice(f.index)));b=document.createElement("ul");b.innerHTML=m;return e(b.firstChild)}function Qc(a){a=e(a);var b;a=e("<div>").append(a.clone()).html();b=document.createElement("ul");b.innerHTML=a;return e(b.firstChild)}function xb(a){H=B.length;if(0<H){sc();var b=t.getCounter();a==b?(od(),t.setPlaylistItems(H)):(t.setPlaylistItems(H,!1),a<b&&t.reSetCounter(t.getCounter()-1));db&&Ua()}else Mb(),pb=null,
"undefined"!==typeof playlistEmpty&&playlistEmpty(N,M)}var m=!1,N=this;e("body");var Hd=e(window),$a=e(document),Ge=e.inArray(window.location.protocol,["http:","https:"])?"http:":window.location.protocol,ed,yb=navigator.userAgent,tb;if(-1<yb.indexOf("iPhone")||-1<yb.indexOf("iPod")||-1<yb.indexOf("iPad"))-1<yb.indexOf("iPhone")?tb="iPhone":-1<yb.indexOf("iPod")?tb="iPod":-1<yb.indexOf("iPad")&&(tb="iPad");var ce=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),bc=document.createElement("audio"),
gb,$b,Z=!1;bc.canPlayType?(Z=!0,gb=!!bc.canPlayType&&""!=bc.canPlayType("audio/mpeg"),$b=!!bc.canPlayType&&""!=bc.canPlayType('audio/ogg; codecs="vorbis"')):(gb=!0,$b=!1);var ne=hap_source_path+h.buttonsUrl.prev,he=hap_source_path+h.buttonsUrl.prevOn,oe=hap_source_path+h.buttonsUrl.next,ie=hap_source_path+h.buttonsUrl.nextOn,Te=hap_source_path+h.buttonsUrl.play,Se=hap_source_path+h.buttonsUrl.playOn,Ve=hap_source_path+h.buttonsUrl.pause,Ue=hap_source_path+h.buttonsUrl.pauseOn,kc=hap_source_path+h.buttonsUrl.loop,
Jb=hap_source_path+h.buttonsUrl.loopOn,gd=hap_source_path+h.buttonsUrl.volume,je=hap_source_path+h.buttonsUrl.volumeOn,hd=hap_source_path+h.buttonsUrl.mute,ke=hap_source_path+h.buttonsUrl.muteOn,lc=hap_source_path+h.buttonsUrl.shuffle,Kb=hap_source_path+h.buttonsUrl.shuffleOn,pe=hap_source_path+h.buttonsUrl.download,le=hap_source_path+h.buttonsUrl.downloadOn,Ed=hap_source_path+h.buttonsUrl.trackUrlIcon,Fd=hap_source_path+h.buttonsUrl.trackDownloadIcon,we=hap_source_path+h.buttonsUrl.trackRemoveIcon,
Pd=hap_source_path+h.buttonsUrl.link_pause,vc=hap_source_path+h.buttonsUrl.link_play,k=e(this).css("display","block"),ha=k.hasClass("hap_circle"),Ia=!1;Z&&Ze()&&(Ia=!0);var ud="html5audio-popup"==k.attr("id"),mb=k.find(".playlistHolder"),Ma=k.find(".playlist_inner").css("opacity",0);k.find(".playerHolder");k.find(".player_mediaTime");var Ga=k.find(".player_mediaTime_current"),Ha=k.find(".player_mediaTime_total"),ae=k.find(".player_mediaName_Mask"),hb=k.find(".player_mediaName");k.find(".player_controls");
var $e=k.find(".player_volume"),Xd=k.find(".preloader"),oc=k.find(".player_download");k.find(".componentPlaylist");var Ya=e(h.playlistList);ud&&window.opener&&(Ya=window.opener.jQuery(h.playlistList));var Bd=new APHAPYTLoader(h);e(Bd).on("APHAPYTLoader.END_LOAD",function(a,b){var c,g=b.length,f;for(c=0;c<g;c++)f=b[c],f.description=f.description?f.description.replace(/["']/g,""):null,na&&(f.url=na),O&&(f.dlink=O),S&&(f.download=S),z.push(f);z.length>Yd&&(z=z.slice(0,Yd));Ra()});var M=h.sound_id,ea=
h.autoPlay,Fe=h.autoPlay,Sd=h.autoPlay,Qe=h.autoLoad;isMobile&&(ea=!1,Sd=h.autoPlay=!1);var af=h.useOnlyMp3Format,ad=h.soundcloudApiKey,sa=h.soundcloud_result_limit,Pc=h.podcast_result_limit,Yd=h.yt_playlist_result_limit,Wb=h.ofm_result_limit,wb=h.useSongNameScroll,db=h.autoSetSongTitle,za=h.loopingOn,Aa=h.randomPlay,fb=h.mediaTimeSeparator,bf=h.seekTooltipSeparator,ac=h.defaultArtistData,Tc=h.useNumbersInPlaylist,Vc=h.titleSeparator,pb=h.activePlaylist,u=h.useAlertMessaging,Id=h.activatePlaylistScroll,
Gb=h.playlistScrollOrientation.toLowerCase(),ye=h.sortablePlaylistItems,ze=h.autoReuseMailForDownload,Gd=h.useRemoveBtnInTracks,cf=h.useVolumeTooltip,Ta=h.playlistItemContent.toLowerCase(),df=h.useKeyboardNavigation,Re=h.useBtnRollovers,qd=h.usePlaylistRollovers,yd=h.getTrackInfoFromID3;Ga.html("0:00");Ha.html("0:00");var cd=Ga.html(),dd=Ha.html();hb.html(ac);Ga.html(cd+fb);Ha.html(dd);var P=!0;if(!Z||!gb&&af)P=!1;var Za,cb,Ca,Ob,ob,nb,ra=!1,vd="hap_processed",wd="hap_draggable",Nc,na,Kd,Wc,Pa,O,
S,mc,fa,Rb,Od,Da,Qb,Kc,Sc=!1;void 0!=mb.attr("data-playlistLocked")&&(Sc=!0);var Ib="playlist_locked",Nb=!1,Ub,r,v=null,x=!0,fc=!1,Jc=!1,eb,pc,Vd=50,V,da=!1,oa="",sb="",F=!1,Oc=hap_source_path+"includes/ba-simple-proxy.php",Ba,Fa;za&&k.find(".player_loop").find("img").attr("src",Jb);Aa&&k.find(".player_shuffle").find("img").attr("src",Kb);var B=[],Qa=[],R=[],H=0,aa,sd,xd=e('<div class="hap_feedParser"/>'),Ae=0==k.find("iframe[id='dl_iframe']").length?e('<iframe id="dl_iframe"/>').css({position:"absolute",
left:"-10000px",display:"none"}).appendTo(k):k.find("iframe[id='dl_iframe']"),qb=e("<div/>"),Mc=e("<div/>");if(isMobile)var Vb,Be=1E3,uc=0==mb.find("div[id='download_confirm']").length?e('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({opacity:0,zIndex:1E3}).appendTo(mb):mb.find("div[id='download_confirm']");var z=[],J=[],q=h.flashAudio,ba=h.circleMain,Wd=!1,Pb,n,A,Rd=!1,Xb,E=h.flashYoutube,Ea,nc=!1,Oa=!1,Hb=!1,$c,Zc=!1,Sa=[],Rc,rc,Tb,Yc,ta;wb&&d();var t=e.playlistManager({randomPlay:Aa,
loopingOn:za});e(t).on("ap_PlaylistManager.COUNTER_READY",function(){var a=t.getCounter(),b=B[a];b&&!Sc&&(nd(),db&&Ua(),V=b.origtype?b.origtype:b.type,oa=b.mp3,sb=b.ogg,b.download?mc=!0:mc=null,Lb(),Xc(),"undefined"!==typeof itemTriggered&&itemTriggered(N,M,a))});e(t).on("ap_PlaylistManager.PLAYLIST_END",function(){nd();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(N,M);F=!1;Ja("off")});e(t).on("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&&
audioPlayerPlaylistEnd(N,M)});var rb="",ib="",jb="",tc;"ontouchstart"in window?(tc=!0,rb="touchstart.ap mousedown.ap",ib="touchmove.ap mousemove.ap",jb="touchend.ap mouseup.ap"):(tc=!1,rb="mousedown.ap",ib="mousemove.ap",jb="mouseup.ap");var Db=!1,zc,cc=!1,C=h.defaultVolume;0>C&&(C=0);0==C?zc=.5:1<C&&(C=1);var ja=k.find(".volume_seekbar").css("cursor","pointer").on(rb,function(a){a.preventDefault();ua(a);return cc=!1}),Cb="horizontal";void 0!=ja.attr("data-orientation")&&(Cb=ja.attr("data-orientation").toLowerCase());
if(void 0!=ja.attr("data-autoHide")){var Db=!0,Ab=!1,U,ec=parseInt(ja.attr("data-autoHide"),10);if(!isMobile)$e.on("mouseover",function(){if(!m)return!1;U&&clearTimeout(U);ja.css("display","block");Ab=!0;return!1}).on("mouseout",function(){if(!m)return!1;U&&clearTimeout(U);U=setTimeout(T,ec);return!1})}var Bb=!1,ka=0,dc=k.find(".volume_level"),kb=k.find(".volume_bg");if(cf&&!isMobile){ja.on("mouseover",p);var La=k.find(".player_volume_tooltip"),be=parseInt(La.css("top"),10);La.on("mouseenter",function(){ja.off("mouseover",
p);La.css("display","none")}).on("mouseleave",function(){ja.on("mouseover",p)})}else k.find(".player_volume_tooltip").remove();var ab,Eb,ca=!1,Bc=k.find(".progress_bg"),Ka=k.find(".load_progress"),xa=k.find(".play_progress");k.find(".player_progress");var W=Bc.width(),Ac=!1;if(ha){var zb=k.find(".load_canvas").css("cursor","pointer"),fd=k.find(".play_canvas"),Va=k.find(".circlePlayer"),Zd=parseFloat(Va.attr("data-offOpacity"),10),$d=parseFloat(Va.attr("data-onOpacity"),10);isMobile&&(Zd=$d=1);var vb=
{flash_id:h.flash_id,strokeSize:parseInt(Va.attr("data-strokeSize"),10),play_color:fd.attr("data-bgcolor"),load_color:zb.attr("data-bgcolor"),tolerance:parseInt(Va.attr("data-tolerance"),10),offOpacity:Zd,onOpacity:$d,circleWidth:zb.width(),circleHeight:zb.height()};if(Ia){var Fb=vb.strokeSize,Fc=vb.play_color,de=vb.load_color,K=zb[0].getContext("2d"),Xa=fd[0].getContext("2d"),jd=2*Math.PI,ic=Math.PI/2,la=vb.circleWidth,pa=vb.circleHeight,Ec=la/2,Dc=Ec-Fb,id=h.tolerance,Cc,hc=!1,ma=0;zb.on(rb,function(a){a.preventDefault();
gc(a)?(hc=!1,Cc>Dc-id||ca||(lb(!0),K.clearRect(0,0,la,pa),X(ma),ya())):(hc=!0,ga(a));return!1})}else zb.remove(),fd.remove()}else k.find(".player_progress").css("cursor","pointer").on(rb,function(a){ga(a);return!1});this.flashVideoPause=function(){Ja("off");F=!1;yc()};this.flashVideoResume=function(){bb("off");F=!0;xc()};this.flashVideoEnd=function(){wc()};this.flashVideoStart=function(){bb("off");da=F=!0;xc()};this.flashYoutubeData=function(a,b,c,g){ha?(w(a)&&w(b)&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a/
b),w(c)&&w(g)&&(ma=c/g,ca||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/g))):(w(a)&&w(b)&&Ka&&Ka.width(a/b*W),w(c)&&w(g)&&xa&&xa.width(c/g*W));w(c)&&w(g)&&(Ga&&Ga.html(Yb(c)+fb),Ha&&Ha.html(Zb(g)))};this.flashAudioData=function(a,b,c,g){a/=b;ha?Ia?(w(a)&&Wa(a),w(c)&&w(g)&&(ma=c/g,!ca&&F&&X(c/g))):(null!==a&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a),w(c)&&w(g)&&(ma=c/g,ca||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/g))):(!ca&&xa&&xa.width(c/g*W),null!==a&&(a*=W,a>W&&(a=W),Ka&&
Ka.width(a)),w(c)&&w(g)&&(Ga&&Ga.html(Yb(c)+fb),Ha&&Ha.html(Zb(g))))};this.flashAudioEnd=function(){wc()};this.flashCircleToggle=function(a){lb()};this.flashCircleOverLoader=function(a){player_progress_tooltip.css("display","block");if(w(a)){var b,c;"youtube"==V?Z?(c=A.getDuration(),b=a*c):"undefined"!==typeof l(E)&&(c=l(E).pb_getFlashDuration(),b=a*c):P?n&&(c=n.duration,b=a*c):"undefined"!==typeof l(q)&&(c=l(q).pb_getFlashDuration(),b=a*c);w(b)&&w(c)&&player_progress_tooltip.find("p").html(Yb(b)+
bf+Zb(c))}};this.flashCircleOutLoader=function(){player_progress_tooltip.css("display","none")};this.flashCircleSeek=function(a){qa(a)};this.embedFlash=function(){if(Z)h.useOnlyMp3Format&&!gb&&(a=q.substr(1),embedFlashAudio(a));else{var a=E.substr(1);embedFlashMain(a);a=q.substr(1);embedFlashAudio(a);ha&&(a=ba.substr(1),embedFlashCircle(a))}};df&&$a.keyup(function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.keyCode;37==a?N.previousAudio():
39==a?N.nextAudio():32==a?N.toggleAudio():77==a&&(y(),D());return!1});Hd.resize(function(){if(!m||x)return!1;ed&&clearTimeout(ed);ed=setTimeout(Jd,150)});this.getCurrentTime=function(){if(!m||!V)return!1;var a;if("youtube"!=V)if(P)n&&(a=n.currentTime);else if("undefined"!==typeof l(q))try{a=l(q).pb_getFlashPosition()}catch(b){}return a};this.setPlayIcon=function(){Da&&Da.hasClass("play_link")&&Da.attr("src",vc);F=!1};this.playAudio=function(){if(!m||x||!v||F||!da)return!1;if("youtube"==V){if(!Oa)return!1;
Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else P?n&&n.play():"undefined"!==typeof l(q)&&l(q).pb_play();bb("off");da=F=!0};this.pauseAudio=function(){if(!m||x||!v||!F||!da)return!1;if("youtube"==V){if(!Oa)return!1;Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else P?n&&n.pause():"undefined"!==typeof l(q)&&l(q).pb_pause();Ja("off");F=!1};this.toggleAudio=function(){if(!m||x||!v||!da)return!1;lb()};this.stopAudio=function(){if(!m||x||!v||!da)return!1;
if("youtube"==V){if(!Oa)return!1;Z?A.stop():"undefined"!==typeof l(E)&&l(E).pb_dispose()}else P?n&&(n.src="",gb?n.src=oa:$b&&(n.src=sb)):"undefined"!==typeof l(q)&&l(q).pb_dispose();Ic();F=!1};this.checkAudio=function(a){if(!m||x||!v)return!1;a=a.toLowerCase();if(F){if("pause"==a)if("youtube"==V){if(!Oa)return!1;Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else P?n&&n.pause():"undefined"!==typeof l(q)&&l(q).pb_pause();else if("stop"==a){if("youtube"==V){if(!Oa)return!1;
A.stop()}else P?n&&(n.src="",gb?n.src=oa:$b&&(n.src=sb)):"undefined"!==typeof l(q)&&l(q).pb_dispose();Ic()}F=!1;Ja("off")}};this.nextAudio=function(){if(!m||x||!v)return!1;Na();t.advanceHandler(1,!0)};this.previousAudio=function(){if(!m||x||!v)return!1;Na();t.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!m||x||!v)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<H;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return u&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===
typeof a){if(0>a||a>H-1)return u&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. Load audio failed.'),!1}else return u&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;Na();t.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!m||x)return!1;if("undefined"===typeof a)return u&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1;pb=a;rd(pb)};this.addTrack=function(a,b,c,g){if(!m||x)return!1;
if("undefined"===typeof a)return u&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"===typeof b)return u&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof c)return u&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var f=1,d=!1;if("string"!==typeof c&&"[object Object]"!==Object.prototype.toString.call(c))if("[object Array]"===Object.prototype.toString.call(c))f=c.length,d=!0;else return u&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),
!1;Ca=g;a=a.toLowerCase();"visible"==a?(v&&ra&&Mb(),Ob=!0,ra=!1):(v&&!ra&&Mb(),ra=ob=!0);cb=!1;if(v)if("undefined"!==typeof Ca){if(0>Ca||Ca>H)return u&&alert('Invalid position to insert track to. Position number "'+g+'" doesnt exist. AddTrack failed.'),!1;Ca==H&&(cb=!0)}else cb=!0,Ca=H;else{if("undefined"!==typeof Ca){if(0!=Ca)return u&&alert('Invalid position to insert track to. Position number "'+g+'" doesnt exist. AddTrack failed.'),!1}else Ca=0;cb=!0}td();x=!0;Nb=!1;g=0;var k,h=e("<ul id = playlist"+
Math.floor(9999*Math.random())+"></ul>");b=b.toLowerCase();for(g;g<f;g++)k=d?c[g]:c,"html"==b?Qc(k).appendTo(h):(k.type&&k.mp3||k.path)&&Ad(k).appendTo(h);J=[];qb.empty();h.appendTo(qb).find("li[class='playlistItem']").each(function(){J.push(e(this))});nb=!1;v||(nb=!0,v="visible"==a?Ma:Mc);Y()};this.inputAudio=function(a){if(!m||x)return!1;if("undefined"===typeof a)return u&&alert("inputAudio method requires data parameter. inputAudio failed."),!1;if("undefined"===a.mp3)return u&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),
!1;Na();t.reSetCounter();oa=a.mp3;"undefined"!==a.ogg&&(sb=a.ogg);"undefined"!==a.title?Ua(a.title):Ua(ac);isMobile&&(ea=!0,P||"undefined"!==typeof l(q)&&l(q).pb_setAutoplay(!0));Lb();Xc()};this.removeTrack=function(a){if(!m||x||!v)return!1;if("undefined"===typeof a)return u&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"===typeof a){var b=0,c=!1;for(b;b<H;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return u&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),
!1;R[a]&&B[a]?(R[a].remove(),B.splice(a,1),xb(a)):u&&alert('RemoveTrack with name "'+a+'" failed.')}else if("number"===typeof a){if(0>a||a>H-1)return u&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. RemoveTrack failed.'),!1;R[a]&&B[a]?(R[a].remove(),B.splice(a,1),xb(a)):u&&alert('RemoveTrack with name "'+a+'" failed.')}else if("[object Array]"===Object.prototype.toString.call(a))if("string"===typeof a[0]?b=!0:"number"===typeof a[0]&&(b=!1),b){var b=0,c=a.length,g,f,d;b;a:for(;b<
c;b++)if(f=a[b],"string"===typeof f){d=0;g=B.length;if(0==g){xb();break a}for(d;d<g;d++)if(f==B[d].title&&R[d]&&B[d]){R[d].remove();B.splice(d,1);xb(d);break}}}else a:for(a.sort(Ye),b=0,c=a.length,b;b<c;b++){if(f=a[b],"number"===typeof f){g=B.length;if(0==g){xb();break a}-1<f&&f<g&&R[f]&&B[f]&&(R[f].remove(),B.splice(f,1),xb(f))}}else return u&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1};this.destroyAudio=function(){if(!m||x||!v)return!1;
od()};this.destroyPlaylist=function(){if(!m||x||!v)return!1;Mb()};this.setTitle=function(a){if(!m||x||!v)return!1;Ua(a)};this.toggleShuffle=function(){if(!m||x)return!1;Aa?(k.find(".player_shuffle").find("img").attr("src",lc),Aa=!1):(k.find(".player_shuffle").find("img").attr("src",Kb),Aa=!0);t.setRandom(Aa)};this.toggleLoop=function(){if(!m||x)return!1;za?(k.find(".player_loop").find("img").attr("src",kc),za=!1):(k.find(".player_loop").find("img").attr("src",Jb),za=!0);t.setLooping(za)};this.setVolume=
function(a){if(!m||x)return!1;0>a?a=0:1<a&&(a=1);C=a;D()};this.getVolume=function(){return m?C:!1};this.setAutoPlay=function(a){if(!m)return!1;ea=a;P||"undefined"!==typeof l(q)&&l(q).pb_setAutoplay(a)};this.getAutoPlay=function(){return m?ea:!1};this.getIsMobile=function(){return isMobile};this.getMobileType=function(){return tb};this.getSetupDone=function(){return m};this.getPlaylistLoaded=function(){return Nb};this.getPlaylistTransition=function(){return x};this.getMediaPlaying=function(){return!m||
x?!1:F};this.getAudioInited=function(){return!m||x?!1:da};this.getMediaType=function(){return!m||x?!1:V};this.getActiveItem=function(){return!m||x?!1:t.getCounter()};this.getPlaylistItems=function(a){if(!m||x||!R||0==R.length)return!1;if("string"===typeof a)return R;if("number"===typeof a)return 0>num||num>H-1||!R[num]?!1:R[num]};this.getMediaCount=function(){return!m||x?!1:w(H)?H:0};this.getPlaylistHidden=function(){return!m||x?!1:ra};this.get_hidden_playlist_holder=function(){return m?Mc:!1};this.getPlaylistList=
function(){return m&&Ya&&0!=Ya.length?Ya:!1};this.orderPlaylist=function(a,b){if(!m||!v)return!1;if("undefined"===typeof a)return u&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."),!1;var c=v.children("li"),d=c.length;if(0==d)return!1;var f=a.toLowerCase();if("reverse"==f)v.append(c.get().reverse());else if("random"==f||"remap"==f||"swap"==f){if("random"==f)b=We(d);else if("remap"==f){if("undefined"===typeof b||b.length!=d)return!1}else if("swap"==f){if("undefined"===
typeof b||2!=b.length)return!1;c=Xe(d);c.splice(b[1],1,b[0]);c.splice(b[0],1,b[1]);b=e.extend(!0,[],c)}else return!1;orderedItems=jQuery.map(b,function(a){return jQuery(R).get(a)});v.empty().html(orderedItems)}else return u&&alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;sc();if(c=Ma.find("a[class=playlistSelected]").attr("data-id"))t.reSetCounter(c),db&&Ua()};this.checkScroll=function(){if(!m||x||!v)return!1;ia()};this.reinitScroll=function(){if(!m||x||!v)return!1;
aa&&(aa.reinitialise(),"vertical"==Gb?(aa.scrollToY(0),e(".jspPane").css("top","0px")):(aa.scrollToX(0),e(".jspPane").css("left","0px")));wb&&ta&&t&&-1!=t.getCounter()&&db&&Ua()};this.getPlaylistData=function(){return m&&!x&&v?B:!1};this.getSoundId=function(){return m?M:!1};this.getTouch=function(){return m?tc:!1};this.get_hap_source_path=function(){return m?hap_source_path:!1};Z?(e(".flashMain").remove(),e(".circleMain").remove(),P?(e(".flashAudio").remove(),ub()):Le()):Ie();return this}})(jQuery);
(function(e){e.APHAPYTLoader=function(h){function d(){if(p.length){D=p.shift();y=D.type;var d=D.path;Q=[];X=0;qa=1;Wa=D.limit?D.limit:200;ya=D.order?D.order:"relevance";if("youtube_single"==y||"youtube_single_list"==y)d="https://www.googleapis.com/youtube/v3/videos?id="+d+"&key="+ia+"&part=snippet,contentDetails,statistics,status";else if(-1==$.inArray(ya,gc)&&(ya="relevance"),"youtube_playlist"==y)d="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+
d+"&key="+ia+"";else if("youtube_video_query"==y)d="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults=50&order="+ya+"&q="+(D.query||D.path)+"&key="+ia+"";else if("youtube_user_channels"==y)d="https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername="+d+"&key="+ia+"";else if("youtube_channel"==y)d="https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id="+d+"&key="+ia+"";else{alert("Wrong youtube type V3!");
return}T(d)}else $(G).trigger("APHAPYTLoader.END_LOAD",[L])}function T(e){$.ajax({url:e,dataType:"jsonp"}).done(function(e){e.error&&e.error.message&&alert(e.error.message);var h,p=e.items.length;p+X>Wa&&(p=Wa-X);for(h=0;h<p;h++)if(_item=e.items[h])"youtube_playlist"==y||"youtube_single"==y||"youtube_single_list"==y?("private"!=_item.status.privacyStatus&&L.push(ua(_item,y)),X++):"youtube_video_query"==y?(L.push(ua(_item,y)),X++):"youtube_user_channels"!=y&&"youtube_channel"!=y||Q.push(_item.contentDetails.relatedPlaylists.uploads);
if("youtube_single"==y||"youtube_single_list"==y)d();else if("youtube_user_channels"!=y&&"youtube_channel"!=y)if(qa+=50,qa<Wa)if(qa<=e.pageInfo.totalResults&&e.nextPageToken){h=D.path;if("youtube_playlist"==y)var G="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+e.nextPageToken+"&part=snippet,status,contentDetails&maxResults=50&playlistId="+h+"&key="+ia+"";else"youtube_video_query"==y&&(G="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&maxResults=50&order="+
ya+"&q="+h+"&key="+ia+"");T(G)}else d();else va&&(ga++,ga<Q.length?(qa=0,wa=Q[ga],G="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+wa+"&key="+ia+"",T(G)):(va=!1,d())),d();else Q.length?(1<Q.length&&(va=!0),wa=Q[ga],G="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+wa+"&key="+ia+"",y="youtube_playlist",T(G)):d()}).fail(function(e,h,p){alert("There was an error retrieveing youtube data: "+
e.responseText);d()})}function ua(d,e){var h=jQuery.extend(!0,{},D);h.deeplink&&"youtube_single"!=h.type&&(h.deeplink+=(X+1).toString());h.data=d;h.type="youtube";h.origtype=e;"youtube_single"==e||"youtube_single_list"==e?h.id=d.id:"youtube_playlist"==e?h.id=d.contentDetails.videoId:"youtube_video_query"==e&&(h.id=d.id.videoId);h.title||(h.title=d.snippet.title?d.snippet.title:null);h.description||(h.description=d.snippet.description?d.snippet.description:null);!h.thumb&&d.snippet.thumbnails?d.snippet.thumbnails.medium?
h.thumb=d.snippet.thumbnails.medium.url:d.snippet.thumbnails.standard&&(h.thumb=d.snippet.thumbnails.standard.url):default_artwork&&(h.thumb=default_artwork);h.mp3=h.id;h.ogg="";return h}var G=this,y,D,p=[],L=[],Q=[],ga=0,wa,va,qa,X,Wa,ya,gc="date rating relevance title videoCount viewCount".split(" "),ia=h.ytAppId;$.inArray(e.location.protocol,["http:","https:"]);this.setData=function(e){ia&&""!=ia?(L=[],p=$.extend(!0,[],[e]),d()):alert("Youtube APMBI key missing! Please set APMBI key in player settings.")}}})(window);
(function(e){function h(d,h){function ua(d){p.playerReady=!0;p.forcePreviewStop||(e(p).trigger("ap_YoutubePlayer.YT_READY"),"undefined"!==typeof p._player.setVolume&&p._player.setVolume(100*p._defaultVolume),p._autoPlay&&p._player.playVideo())}function G(d){e(p).trigger("ap_YoutubePlayer.QUALITY_CHANGE",[d.data])}function y(d){if(p.forceMainStop&&(p.forceMainStop=!1,"undefined"!==typeof p._player.stopVideo)){p._player.stopVideo();e(p).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");return}-1!=d.data&&
(0==d.data?(e(p).trigger("ap_YoutubePlayer.END_PLAY"),p.loop&&p._player.playVideo()):1==d.data?(p.forcePreviewStop&&"undefined"!==typeof p._player.stopVideo&&p._player.stopVideo(),p._autoPlay=!0,p.small_embed&&"undefined"!==typeof p._player.setVolume&&p._player.setVolume(100*p._defaultVolume),p._inited||(e(p).trigger("ap_YoutubePlayer.START_PLAY"),p._inited=!0,!p.small_embed&&p.quality?p._player.setPlaybackQuality(p.quality):p.small_embed&&p._player.setPlaybackQuality(p._player.getAvailableQualityLevels()[p._player.getAvailableQualityLevels().length-
1])),e(p).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==d.data?e(p).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==d.data&&e(p).trigger("ap_YoutubePlayer.STATE_CUED"))}function D(d){e(p).trigger("ap_YoutubePlayer.ERROR_HANDLER",[d.data])}var p=this;this.isIE=d.isIE?d.isIE:!1;this.isMobile=d.isMobile;this.initialAutoplay=d.initialAutoplay;this._inited=!1;this._player;this._autoPlay=d.autoPlay;this._defaultVolume=d.defaultVolume;this._youtubeHolder=d.youtubeHolder;this._frameId="ytplayer"+Math.floor(16777215*
Math.random());d.quality&&(this.quality=d.quality);d.small_embed&&(this.small_embed=d.small_embed);d.loop&&(this.loop=d.loop);this.lastID;this.playerReadyInterval=100;this.playerReadyIntervalID;this.playerReady=!1;this.protocol=d.protocol;0==d.youtubeChromeless&&(h.useControls=!0,h.ytShowinfo=!0);var L="?controls="+(h.useControls?1:0).toString(),Q="&amp;autohide="+(h.autoHideControls?1:0).toString(),ga="&amp;showinfo="+(h.ytShowinfo?1:0).toString(),wa="&amp;modestbranding="+(h.ytModestbranding?1:
0).toString(),va="&amp;rel="+(h.ytRel?1:0).toString(),qa="&amp;theme="+(h.ytTheme?h.ytTheme:"dark");this.forcePreviewStop=this.forceMainStop=!1;this.youtubeVideoIframe=e("<iframe />",{frameborder:0,src:"https://www.youtube.com/embed/"+d.mediaPath+L+va+ga+Q+"&amp;enablejsapi=1"+qa+wa+"&amp;wmode=transparent",width:"100%",height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe);L=document.createElement("script");
L.src=this.protocol+"//www.youtube.com/iframe_api";Q=document.getElementsByTagName("script")[0];Q.parentNode.insertBefore(L,Q);var X=setInterval(function(){window.YT&&window.YT.Player&&(X&&clearInterval(X),p._player=new YT.Player(p._frameId,{events:{onReady:ua,onPlaybackQualityChange:G,onStateChange:y,onError:D}}))},100);window.onYouTubeIframeAPIReady=function(){}}e.youtubePlayer=function(d,e){return new h(d,e)};h.prototype={clean:function(d){this._player&&("undefined"!==typeof this._player.stopVideo&&
this._player.stopVideo(),this._player=null);this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null);this._youtubeHolder&&this._youtubeHolder.empty().css("display","none")},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(d,e){this.forcePreviewStop=this.forceMainStop=!1;this.quality=e;if(this.playerReady)this._player&&(this._inited=!1,this._autoPlay?"undefined"!==typeof this._player.loadVideoById&&this._player.loadVideoById(d):
"undefined"!==typeof this._player.cueVideoById&&this._player.cueVideoById(d));else{var h=this;this.lastID=d;this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){h.playerReady&&(h.playerReadyIntervalID&&clearInterval(h.playerReadyIntervalID),h.forceMainStop||h.initVideo(h.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0;this._player&&"undefined"!==typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!==
typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&&"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(d){if(this._player)if(void 0==d){if("undefined"===typeof this._player.getPlayerState)return!1;d=this._player.getPlayerState();1==d?"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo():2==d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():-1!=d&&5!=d&&0!=d||"undefined"===typeof this._player.playVideo||
this._player.playVideo()}else d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(d){this._player&&"undefined"!==typeof this._player.seekTo&&this._player.seekTo(d)},isMuted:function(){if(this._player&&"undefined"!==typeof this._player.isMuted)return this._player.isMuted()},getDuration:function(){if(this._player&&"undefined"!==typeof this._player.getDuration)return this._player.getDuration()},
getCurrentTime:function(){if(this._player&&"undefined"!==typeof this._player.getCurrentTime)return this._player.getCurrentTime()},getVideoLoadedFraction:function(){if(this._player&&"undefined"!==typeof this._player.getVideoLoadedFraction)return this._player.getVideoLoadedFraction()},getVideoBytesLoaded:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesLoaded)return this._player.getVideoBytesLoaded()},getVideoBytesTotal:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesTotal)return this._player.getVideoBytesTotal()},
setVolume:function(d){0>d?vol=0:1<d&&(d=1);this._player&&"undefined"!==typeof this._player.setVolume&&this._player.setVolume(100*d)},getPlayerState:function(){if(this._player&&"undefined"!==typeof this._player.getPlayerState)return this._player.getPlayerState()},setAutoPlay:function(d){this._autoPlay=d},getQualityLevels:function(){return this._player.getAvailableQualityLevels()},getCurrQuality:function(){return this._player.getPlaybackQuality()},setPlaybackQuality:function(d){this._player.setPlaybackQuality(d)}}})(jQuery);
(function(e){function h(d){this._loopingOn=d.loopingOn;this._randomPlay=d.randomPlay;this._playlistItems;this._lastInOrder=!1;this._counter=-1;this._lastPlayedFromPlaylistClick;this._lastRandomCounter;this._randomPaused=!1;this._randomArr=[];this._playlistSelect=!1}e.playlistManager=function(d){return new h(d)};h.prototype={setCounter:function(d,e){"undefined"===typeof e&&(e=!0);this._counter=e?this._counter+parseInt(d,10):parseInt(d,10);this._checkCounter()},getCounter:function(){return this._randomPlay?
this._playlistSelect?this._counter:this._randomArr[this._counter]:this._counter},advanceHandler:function(d){this._playlistSelect=!1;this._randomPaused?this._handleRandomPaused(d):this.setCounter(d)},processPlaylistRequest:function(d){this._playlistSelect=!1;this._randomPlay&&(this._playlistSelect=!0,this._lastPlayedFromPlaylistClick=d,this._randomPaused||(this._lastRandomCounter=this._counter,this._randomPaused=!0));this.setCounter(d,!1)},getLastInOrder:function(){return this._lastInOrder},getRandomPaused:function(){return this._randomPaused},
setPlaylistItems:function(d,e){"undefined"===typeof e&&(e=!0);e&&(this._counter=-1);this._playlistItems=d;this._randomPlay&&this._makeRandomList()},reSetCounter:function(d){"undefined"===typeof d?this._counter=-1:(d=parseInt(d,10),this._playlistItems?(d>this._playlistItems-1?d=this._playlistItems-1:0>d&&(d=0),this._counter=d):this._counter=-1)},setRandom:function(d){(this._randomPlay=d)&&this._makeRandomList();this._randomChange()},setLooping:function(d){this._loopingOn=d},_handleRandomPaused:function(d){var h=
e(this);this._randomPaused=!1;this._lastRandomCounter+d>this._playlistItems-1?(this._counter=this._playlistItems-1,h.trigger("ap_PlaylistManager.COUNTER_READY")):0>this._lastRandomCounter+d?(this._counter=0,h.trigger("ap_PlaylistManager.COUNTER_READY")):this.setCounter(this._lastRandomCounter+d,!1)},_randomChange:function(){this._randomPlay?(this._activeIndexFirst(),this._counter=0):this._randomPaused?(this._counter=this._lastPlayedFromPlaylistClick,this._randomPaused=!1):this._counter=this._randomArr[this._counter]},
_checkCounter:function(){if(isNaN(this._counter))alert("ap_PlaylistManager message: No active media, counter = "+this._counter);else{var d=e(this);this._lastInOrder=!1;this._loopingOn?(this._randomPlay?this._counter>this._playlistItems-1?(this._counter=this._randomArr[this._playlistItems-1],this._makeRandomList(),this._firstIndexCheck(),this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._randomArr[0],this._makeRandomList(),this._lastIndexCheck(),this._counter=
this._playlistItems-1):this._counter>this._playlistItems-1?(this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._playlistItems-1),d.trigger("ap_PlaylistManager.COUNTER_READY")):(this._counter>this._playlistItems-1?(this._counter=this._playlistItems-1,this._lastInOrder=!0):0>this._counter&&(this._counter=0),this._lastInOrder?d.trigger("ap_PlaylistManager.PLAYLIST_END"):d.trigger("ap_PlaylistManager.COUNTER_READY"))}},_makeRandomList:function(){3>this._playlistItems||
(this._randomArr=this._randomiseIndex(this._playlistItems))},_firstIndexCheck:function(){if(this._randomArr[0]==this._counter){var d=this._randomArr.splice(0,1);this._randomArr.push(d)}},_lastIndexCheck:function(){if(this._randomArr[this._playlistItems-1]==this._counter){var d=this._randomArr.splice(this._playlistItems-1,1);this._randomArr.unshift(d)}},_activeIndexFirst:function(){var d,e=this._randomArr.length;for(d=0;d<e;d++)if(this._randomArr[d]==this._counter){if(0==d)break;d=this._randomArr.splice(d,
1);this._randomArr.unshift(parseInt(d,10));break}},_randomiseIndex:function(d){var e=[],h=[],G;for(G=0;G<d;G++)e[G]=G;var y;for(G=0;G<d;G++)y=Math.round(Math.random()*(e.length-1)),h[G]=e[y],e.splice(y,1);return h}}})(jQuery);
(function(e){apTextScroller=function(){function e(){"left"==D&&(L-=T,d.css("left",L+"px"),parseInt(d.css("left"),10)<-y&&(L=-T))}var d,T,ua,G,y,D,p,L=0,Q,ga,wa,va,qa=!1;this.init=function(e,h,p,y,L,ga){Q=e;d=h;ua=p;D=y;G=L;T=ga};this.input=function(e){ga=e;Q.html(e);wa=Q.width();var h=e.replace(/\s/g,"&nbsp;")+G;d.html("");d.css("width","auto");d.html(h);y=d.width();if(0!=y){e=h;if(y<=2*ua.width()){for(var p=Math.floor(2*ua.width()/y),D=0;D<p;D++)e+=h;h=y*(p+1)}else e+=h,h=2*y;d.html(e);d.css("width",
h+1+"px");va=e;qa=!0}};this.inputSingle=function(d){};this.activate=function(){this.deactivate();ua.width()>=wa?d.html(ga):(d.html(va),p=setInterval(e,100))};this.deactivate=function(){p&&clearInterval(p);"left"==D&&(d.css("left","0px"),L=0)};this.checkSize=function(){qa&&(ua.width()>=wa?(this.deactivate(),d.html(ga)):(d.html(va),this.activate()))}}})(jQuery);